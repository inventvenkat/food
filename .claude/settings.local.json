{
  "permissions": {
    "allow": [
      "Bash(git commit -m \"$(cat <<'EOF'\nfix: correct Docker build context and registry paths in GitHub Actions\n\nFixed Docker build context paths to build from correct directories and \nupdated registry image naming convention for consistency.\n\n🤖 Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git add .github/workflows/main.yml)",
      "Bash(git add terraform/)",
      "Bash(git commit -m \"$(cat <<'EOF'\nfix: update Terraform configuration for Docker image changes and DynamoDB\n\n- Fixed Docker image names in user_data.sh.tpl to match new naming convention\n- Updated DynamoDB table names to match server code expectations\n- Fixed ALB target group and security group to use correct port 3003\n- Ensured health check configuration aligns with nginx setup\n\n🤖 Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git push)",
      "Bash(git add terraform/alb.tf terraform/security_groups.tf terraform/user_data.sh.tpl terraform/variables.tf)",
      "Bash(git commit -m \"$(cat <<'EOF'\nfix: update Terraform configuration for Docker image changes and DynamoDB\n\n- Fixed Docker image names in user_data.sh.tpl to match new naming convention\n- Updated DynamoDB table names to match server code expectations  \n- Fixed ALB target group and security group to use correct port 3003\n- Ensured health check configuration aligns with nginx setup\n\n🤖 Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit -m \"$(cat <<'EOF'\nfix: update Terraform configuration for Docker image changes and DynamoDB\n\n- Fixed Docker image names in user_data.sh.tpl to match new naming convention\n- Updated DynamoDB table names to match server code expectations  \n- Fixed ALB target group and security group to use correct port 3003\n- Ensured health check configuration aligns with nginx setup\n\n🤖 Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(cd /Users/venkatesh/Workspace/food/terraform)",
      "Bash(terraform state list)",
      "Bash(terraform plan)",
      "Bash(terraform apply -auto-approve)",
      "Bash(terraform show)",
      "Bash(cd /Users/venkatesh/Workspace/food)",
      "Bash(git add terraform/alb.tf)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix: use name_prefix for target group to avoid replacement conflicts\n\nUpdated target group to use name_prefix instead of fixed name to allow \nproper replacement when port changes, avoiding AWS naming conflicts.\n\n🤖 Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(terraform output)",
      "Bash(aws elbv2 describe-target-groups --region us-east-1 --names \"gf-tg-*\" --query 'TargetGroups[0].{Name:TargetGroupName,Port:Port,Protocol:Protocol,HealthCheck:HealthCheckPath,HealthCheckPort:HealthCheckPort,HealthCheckProtocol:HealthCheckProtocol}')",
      "Bash(aws elbv2 describe-target-groups --region us-east-1 --query 'TargetGroups[?starts_with(TargetGroupName, `gf-tg-`)].{Name:TargetGroupName,Port:Port,Protocol:Protocol,HealthCheck:HealthCheckPath,HealthCheckPort:HealthCheckPort,HealthCheckProtocol:HealthCheckProtocol}')",
      "Bash(terraform apply -target=aws_lb_target_group.app -auto-approve)",
      "Bash(aws elbv2 describe-target-groups --region us-east-1 --query 'TargetGroups[?starts_with(TargetGroupName, `gf-tg-`)].{Name:TargetGroupName,HealthCheck:HealthCheckPath,HealthCheckPort:HealthCheckPort}')",
      "Bash(aws logs describe-log-groups --region us-east-1 --log-group-name-prefix \"goodfood\" --query 'logGroups[].logGroupName')",
      "Bash(aws logs describe-log-streams --region us-east-1 --log-group-name goodfood-client-logs --order-by LastEventTime --descending --max-items 1 --query 'logStreams[0].logStreamName')",
      "Bash(aws logs get-log-events --region us-east-1 --log-group-name goodfood-client-logs --log-stream-name \"c245c33566bd6e3c30c80f16e2f5d727f230ffb5a10d5227b3efe38268656c2e\" --limit 10 --query 'events[].message')",
      "Bash(aws logs describe-log-streams --region us-east-1 --log-group-name goodfood-server-logs --order-by LastEventTime --descending --max-items 1 --query 'logStreams[0].logStreamName')",
      "Bash(aws logs get-log-events --region us-east-1 --log-group-name goodfood-server-logs --log-stream-name \"71905b5478e38b3fa0f4b74ed75bc04ce0ae1568722201feaa15e41993a2fc84\" --limit 20 --query 'events[].message')",
      "Bash(terraform output alb_dns_name)",
      "Bash(curl -I http://goodfood-alb-1781457911.us-east-1.elb.amazonaws.com/healthz)",
      "Bash(curl -I https://goodfood-alb-1781457911.us-east-1.elb.amazonaws.com/healthz)",
      "Bash(git add terraform/user_data.sh.tpl server/index.js)",
      "Bash(git commit -m \"$(cat <<'EOF'\nfix: improve health check endpoints and fix environment variables\n\n- Fixed server health check to use properly configured DynamoDB client\n- Added simple /healthz endpoint for load balancer (no dependencies)\n- Added /health/deep endpoint for detailed health monitoring\n- Fixed environment variable substitution in user_data.sh.tpl\n\n🤖 Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit -m \"$(cat <<'EOF'\nfix: improve health check endpoints and fix environment variables\n\n- Fixed server health check to use properly configured DynamoDB client\n- Added simple /healthz endpoint for load balancer (no dependencies)  \n- Added /health/deep endpoint for detailed health monitoring\n- Fixed environment variable substitution in user_data.sh.tpl\n\n🤖 Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(terraform validate)",
      "Bash(rm /Users/venkatesh/Workspace/food/terraform/route53.tf)",
      "Bash(nslookup goodfood-alb-1781457911.us-east-1.elb.amazonaws.com)",
      "Bash(nslookup cookfood.xyz)",
      "Bash(dig cookfood.xyz)",
      "Bash(aws elbv2 describe-listeners --load-balancer-arn arn:aws:elasticloadbalancing:us-east-1:872450838091:loadbalancer/app/goodfood-alb/f247e76bca5a4ec3)",
      "Bash(aws acm describe-certificate --certificate-arn arn:aws:acm:us-east-1:872450838091:certificate/6b0c769b-720c-445f-b209-74c1bd023c0d)",
      "Bash(curl -I https://www.cookfood.xyz)",
      "Bash(curl -I https://cookfood.xyz)",
      "Bash(aws acm request-certificate --domain-name cookfood.xyz --subject-alternative-names \"*.cookfood.xyz\" --validation-method DNS --region us-east-1)",
      "Bash(aws acm describe-certificate --certificate-arn arn:aws:acm:us-east-1:872450838091:certificate/f8223c19-4279-4ce4-925a-47117fd03c0e)",
      "Bash(openssl s_client -connect cookfood.xyz:443 -servername cookfood.xyz -showcerts)",
      "Bash(curl -vI https://cookfood.xyz 2 >& 1)",
      "Bash(curl -s -I https://cookfood.xyz)",
      "Bash(curl -s https://cookfood.xyz)",
      "Bash(curl -s https://cookfood.xyz:3002)",
      "Bash(find /Users/venkatesh/Workspace/food -name \".env*\" -type f)",
      "Bash(git add .)",
      "Bash(git commit -m \"$(cat <<'EOF'\nfix: update SSL certificate and nginx configuration for HTTPS support\n\n- Update ACM certificate to include both cookfood.xyz and *.cookfood.xyz domains\n- Remove Route 53 configuration for GoDaddy DNS setup\n- Add security headers to nginx proxy configuration\n- Fix X-Forwarded-Proto header to resolve mixed content warnings\n\n🤖 Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git push origin feat/dynamodb)"
    ],
    "deny": []
  }
}